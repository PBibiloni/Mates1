---
title: "T2 - Exercicis de les diapositives"
output: html_document
---

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(echo = TRUE)
```


## Exemples 1-3

* Benzina consumida al conduir un cotxe:

```{r}
x = seq(0, 1000, by=100)
y = 7.5 * (x/100)
# Agrupam les dades i les mostram per pantalla
kable(head(data.frame(x, y)))
# Feim la gràfica per visualitzar la funció
plot(x, y, xlab = 'Distància [km]', ylab = 'Benzina consumida [L]')
```

* Desintegració radioactiva de l'Urani-235

Començam visualitzant la dependència:

```{r}
t = 0:100
q = 100 * 0.5^(t/703.8)
kable(head(data.frame(t, q)))
plot(t, q, xlab = 'Temps [milions d\'anys]', ylab = 'Urani-235 remanent [g]')
```


Podem visualitzar-ho a diverses escales:

```{r}
plot(0:1000, 100 * 0.5^(0:1000/703.8), xlab = 'Temps [milions d\'anys]', ylab = 'Urani-235 remanent [g]')
points(0:100, 100 * 0.5^(0:100/703.8), col='red')
points(0:10, 100 * 0.5^(0:10/703.8), col='blue')
```

* Pes i alçada d'adults sans

Visualitzem el model 1:

```{r}
a = seq(1.40, 2.20, by=0.01)
p = 17*a^2.5
plot(p, a, xlab = 'Pes [kg]', ylab = 'Alçada [m]')
plot(a, p, xlab = 'Alçada [m]', ylab = 'Pes [kg]')
```

Visualitzem ara el model 3, que estableix la mateixa relació entre pes i alçada, però calculant el segon en funció del primer:

```{r}
p = 40:120
a = 0.322 * p^0.4
plot(a, p, xlab = 'Alçada [m]', ylab = 'Pes [kg]')
plot(p, a, xlab = 'Pes [kg]', ylab = 'Alçada [m]')
```

## Exemple 3

```{r}
x = 0:10
y = -3 * x + 40
kable(data.frame(x, y))
plot(x, y, type="l")
```



## Exemple 4

Introduïm les dades i les mostram

```{r}
df = data.frame(
  temps=c(10, 20, 30, 40, 50),
  concentracio=c(44, 35.2, 29.5, 25.8, 22.3)
)
kable(df)
plot(df$temps, df$concentracio)         # Fer gràfica dels punts 
```

Calcularem un model de regressió lineal, i mostrarem

```{r}
# Calcular model lineal de concentració en funció del temps
model = lm(
  concentracio~temps, 
  data=df
)
# Mostram els coeficients del model
summary(model)
```
També podem visualitzar-ho en una gràfica:

```{r}
# Fer gràfica dels punts       
plot(
    x=df$temps, 
    y=df$concentracio, 
    xlab="Temps [min]", 
    ylab="Conc. [mg/100 ml]"
)
# Afegir la recta del model de regressió
abline(model, col='red')
```



## Exercicis 4-5

* $f(x) = 10^x$

Mostrem els eixos:

```{r}
plot(0, log="y", 
     xlim=c(-1, 5), xlab="Eix x", 
     ylim=c(1, 1e4), ylab="Eix y")
```

I visualitzem ara els punts i, unint-los, l'equació que volem trobar

```{r}
x = -1:5
y = 10^x
plot(x, y, col="red", type='o', log="y",
     xlim=c(-1, 5), xlab="Eix x", 
     ylim=c(1, 1e4), ylab="Eix y")
```

* $g(x) = 0.1 \cdot 10^x$

De nou, mostrem els eixos buits:

```{r}
plot(0, log="y", 
     xlim=c(-1, 5), xlab="Eix x", 
     ylim=c(1, 1e4), ylab="Eix y")
```

I dibuixem els punts que ens interessen

```{r}
x = -1:5
y = 0.1 * 10^x
# Agrupam els punts (x, y(x)) i els mostram
kable(data.frame(x, y))
# Visualitzam la gràfica
plot(x, fx, col="red", type='o', log="y",
     xlim=c(-1, 5), xlab="Eix x", 
     ylim=c(1, 1e4), ylab="Eix y")
```






## Exercici 8

Alternativa 1:

```{r}
x = 0:10
y = 2 * 4.5^x
Y = log10(y)
plot(x, Y, type="l")
```


Alternativa 2 (preferida), deixant que ho faci R per noltros:

```{r}
x = 0:10
y = 2 * 4.5^x
plot(x, y, type="l", log="y")
```


## Exemple 9

Introduïm les dades i les mostram

```{r}
df = data.frame(
  temps=c(10, 20, 30, 40, 50),
  concentracio=c(44, 35.2, 29.5, 25.8, 22.3)
)
kable(df)
plot(df$temps, df$concentracio)
```

Calcularem un model de regressió exponencial de la concentració en funció del temps, i mostrarem

```{r}
# Calcular model lineal de concentració en funció del temps
model_exp = lm(
  log10(concentracio)~temps, 
  data=df
)
# Mostram els coeficients del model
summary(model_exp)
```

També podem visualitzar-ho en una gràfica semi-log:

```{r}
# Fer gràfica dels punts       
plot(
    x=df$temps, 
    y=log10(df$concentracio), 
    xlab="Temps [min]", 
    ylab="log(Conc. [mg/100 ml])",
)
# Afegir la recta del model de regressió
abline(model_exp, col='red')
```



Finalment, vegem-ho en una gràfica lineal:

```{r}
# Calcular prediccions noves
df_model = data.frame(temps=0:150)
df_model$pred = 10^predict(model_exp, df_model)
# Mostrar la corba del model de regressió
plot(
    x=df_model$temps, 
    y=df_model$pred, 
    col='red', type="l",
    xlab="Temps [min]", 
    ylab="Conc. [mg/100 ml]",)
# Afegir les dades originals
points(
    x=df$temps, 
    y=df$concentracio, 
)
```










## Exercicis 10-11

* Gràfica semi-log

Calculem els punts que ens demanen:

```{r}
x = 1:6
y = 8*x^2
kable(data.frame(x, y))
```

Mostrem els eixos:

```{r}
plot(0.1, log="y", 
     xlim=c(1, 6), xlab="Eix x", 
     ylim=c(2, 2^8), ylab="Eix y", yaxt="n")
axis(side=2, at=2^c(1:8))
```

Visualitzem ara els punts en aquesta gràfica semi-log:

```{r}
plot(x, y, col="red", type='o', log="y",
     xlim=c(1, 6), xlab="Eix x", 
     ylim=c(2, 2^8), ylab="Eix y", yaxt="n")
axis(side=2, at=2^c(1:8))
```


* Gràfica log-log

De nou, mostrem els eixos:

```{r}
plot(0.1, log="xy", 
     xlim=c(1, 6), xlab="Eix x", 
     ylim=c(2, 2^8), ylab="Eix y", yaxt="n")
axis(side=2, at=2^c(1:8))
```

Finalment, visualitzem els punts en la gràfica log-log:

```{r}
x = 1:6
y = 4*x^2
plot(x, y, col="red", type='o', log="xy",
     xlim=c(1, 6), xlab="Eix x", 
     ylim=c(2, 2^8), ylab="Eix y", yaxt="n")
axis(side=2, at=2^c(1:8))
```




## Exemple 12

Opció 1:

```{r}
x = 1:100
y = 2 * 4.5^x
X = log10(x)
Y = log10(y)
plot(X, Y, type="l")
```

Opció 2, preferida:

```{r}
x = 1:100
y = 2 * 4.5^x
plot(x, y, log="xy", type="l")
```





## Exemple 13


Introduïm les dades i les mostram

```{r}
df = data.frame(
  temps=c(10, 20, 30, 40, 50),
  concentracio=c(44, 35.2, 29.5, 25.8, 22.3)
)
kable(df)
plot(df$temps, df$concentracio)
```

Calcularem un model de regressió exponencial de la concentració en funció del temps, i mostrarem

```{r}
# Calcular model lineal de concentració en funció del temps
model_pot = lm(
  log10(concentracio)~log10(temps), 
  data=df
)
# Mostram els coeficients del model
summary(model_pot)
```

També podem visualitzar-ho en una gràfica semi-log:

```{r}
# Fer gràfica dels punts       
plot(
    x=log10(df$temps), 
    y=log10(df$concentracio), 
    xlab="log(Temps [min])", 
    ylab="log(Conc. [mg/100 ml])",
)
# Afegir la recta del model de regressió
abline(model_pot, col='red')
```



Finalment, vegem-ho en una gràfica lineal:

```{r}
# Calcular prediccions noves
df_model = data.frame(temps=0:150)
df_model$pred = 10^predict(model_pot, df_model)
# Mostrar la corba del model de regressió
plot(
    x=df_model$temps, 
    y=df_model$pred, 
    col='red', type="l",
    xlab="Temps [min]", 
    ylab="Conc. [mg/100 ml]",)
# Afegir les dades originals
points(
    x=df$temps, 
    y=df$concentracio, 
)
```

